<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Research and Documentation - Wiki Song Match Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Research and Documentation";
        var mkdocs_page_input_path = "documentation.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Wiki Song Match Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Welcome to Wiki Song Match</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Installation/">Installation</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Research and Documentation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#initial-ideas">Initial Ideas</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#getting-the-embeddings">Getting the Embeddings</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#initial-approach">Initial Approach</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#keywords-to-the-rescue">Keywords to the Rescue</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#matching">Matching</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gussing-game">Gussing Game</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../game/">Game</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../references/">References</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Wiki Song Match Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Research and Documentation</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="research-and-documentation">Research and Documentation</h1>
<h2 id="initial-ideas">Initial Ideas</h2>
<p>In the beginning, my main idea was to do something with embeddings. A spatial representation of data just seemed interesting to me, and I wanted to have a go at this myself and pack it into a creative project. I searched for data that is widely available and easy to process. Wikipedia articles were the first thing that came to my mind. I quickly searched the web and found a Python package to retrieve them easily.</p>
<p>Now I needed something that I could compare the articles with. Nothing really came to my mind at first, but a few days later, I had the idea to match songs to Wikipedia articles.</p>
<h2 id="getting-the-embeddings">Getting the Embeddings</h2>
<h3 id="initial-approach">Initial Approach</h3>
<p>My main goal for this project was to let the algorithm do all the matching itself, without interference from a human. So, I needed methods that required no labeling. Additionally, I wanted to use as many existing technologies as possible because the project seemed ambitious for a 3-credit module.</p>
<p>With those goals in mind, the only really effective way to compare songs to articles was via the lyrics. To create a good matching algorithm, the embeddings needed to be as homogeneous as possible. This means the content of both texts should be as similar as possible before it gets converted to an embedding.</p>
<p>I started off by trying to summarize the lyrics within 5 sentences using Gemini. For the Wikipedia articles, I already had a summary from the top of each page.</p>
<p>This is what a prompt to the LLM looked like:</p>
<pre><code>"Here are some lyrics from the song "
+ title
+ " by "
+ artist
+ ". Write me a summary of the song. Dont try to interpret the lyrics, just summarize them. Dont speak about the lyrics being in a song and refer to the author as 'A person'. Take the lyrics and just assume that they are true. Do it with 5 sentences and only return the summarized text:\n"
+ lyrics,
</code></pre>
<p>Now I plug the result into a pretrained Sentence-BERT, sum the embedding of each sentence, and normalize them. This is my final embedding of the 5 sentences.</p>
<p>To check if the Wikipedia and lyrics embeddings are close by, I decided to use a dimensionality reduction method called TSNE so I could plot them in a 2D space. When I tested it with a random selection of songs and Wikipedia articles, the result was rather humbling:</p>
<p><img alt="Test 1" src="../graphs/Test.png" /></p>
<p>I played around a lot with the prompt and got similar results:</p>
<p><img alt="Test 2" src="../graphs/Test2.png" />
<img alt="Test 3" src="../graphs/Test3.png" /></p>
<h3 id="keywords-to-the-rescue">Keywords to the Rescue</h3>
<p>Clearly, a new approach was needed. I didn't want to change the whole pipeline, though, because I had already spent a lot of time researching and building pipelines. My research led me to a <a href="https://sol.sbc.org.br/index.php/eniac/article/view/12155">Paper</a> hat did "Temporal Analysis and Visualization of Music." Inspired by this paper, I gave the keyword-based approach a go. Also, I used their dataset, which already has lemmatized lyrics of about 25,000 songs, so no more lyrics scraping on websites was required.</p>
<p>Since I didn't want to copy their method entirely, I chose to go for another keyword extraction method and stumbled upon YAKE. Now I switched back to a regular BERT model and summed the embeddings of the top 10 keywords, normalizing them as well. This resulted in the following TSNE plot:</p>
<p><img alt="Final TSNE" src="../graphs/Final Test.png" /></p>
<p>While this doesn't look perfect, there definitely is more overlap between the embeddings. Without any other idea on how to improve my method, I decided to scale it to all 25,000 songs in my dataset. My intuition was that with a bigger sample size, we would have more individual songs that appear in the Wikipedia embeddings group.</p>
<p>To visualize the final results, I added an interactive file called <code>tsne_plot.html</code> </p>
<h2 id="matching">Matching</h2>
<p>The final matching is rather easy. We only need a good metric to tell us which lyrics embedding is closest to our desired Wikipedia embedding. The main contenders are Euclidean distance and cosine similarity. I chose to go for cosine similarity because it seems to be the standard.</p>
<p>To do the matching, I actually use a vector database called Pinecone. Pinecone is not only used to store all my 25,000 lyrics embeddings, but you can also query for an embedding and get the top k closest to the specified embedding. This basically gets the job done for the matching part.</p>
<h2 id="gussing-game">Gussing Game</h2>
<p>Thanks to the questioning of Laura at my final presentation, I decided to create a super simple guessing game where you try to outmatch the "AI" and find a more suitable song for a random Wikipedia article. You can find more about that on the installation and game tab.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Installation/" class="btn btn-neutral float-left" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../game/" class="btn btn-neutral float-right" title="Game">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../Installation/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../game/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
